<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAMGIS æ•°æ®ç®¡ç†</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { color: #667eea; margin-bottom: 20px; text-align: center; }
        .info {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .info h2 { color: #667eea; font-size: 18px; margin-bottom: 10px; }
        .info p { color: #666; line-height: 1.6; }
        .status { font-size: 14px; color: #999; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>HAMGIS æ•°æ®ç®¡ç†ä¸­å¿ƒ</h1>
        
        <div class="info">
            <h2>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h2>
            <p>æµ‹é‡æ¬¡æ•°: <strong id="count">0</strong></p>
            <p>æ€»é¢ç§¯: <strong id="area">0.0</strong> äº©</p>
            <div class="status" id="status">æ­£åœ¨è¿æ¥...</div>
        </div>
        
        <div class="info">
            <h2>ğŸ“ è¯´æ˜</h2>
            <p>è¿™æ˜¯HAMGISæµ‹äº©è½¯ä»¶çš„æ•°æ®ç®¡ç†é¡µé¢ã€‚</p>
            <p>åœ¨æ‰‹è¡¨ç«¯å®Œæˆæµ‹é‡åï¼Œæ•°æ®ä¼šè‡ªåŠ¨åŒæ­¥åˆ°è¿™é‡Œã€‚</p>
        </div>
    </div>
    
    <script src="./zepp-bridge.js"></script>
    <script>
        console.log('é¡µé¢åŠ è½½å¼€å§‹');
        
        var heartbeatCount = 0;
        var bridge = null;
        
        // å¿ƒè·³å‡½æ•°
        function heartbeat() {
            heartbeatCount++;
            console.log('å¿ƒè·³:', heartbeatCount);
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('count').textContent = heartbeatCount.toString();
            
            // å‘Side Serviceå‘é€å¿ƒè·³
            if (bridge && bridge.call) {
                try {
                    bridge.call({
                        method: 'heartbeat',
                        params: { count: heartbeatCount }
                    });
                } catch (e) {
                    console.error('å‘é€å¿ƒè·³å¤±è´¥:', e);
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆ');
            
            // åˆå§‹åŒ–æ•°æ®
            document.getElementById('area').textContent = '28.6';
            
            // å°è¯•å»ºç«‹ä¸Side Serviceçš„è¿æ¥
            try {
                if (typeof ZeppBridge !== 'undefined') {
                    bridge = new ZeppBridge();
                    console.log('ZeppBridgeå·²åˆ›å»º');
                    document.getElementById('status').textContent = 'å·²è¿æ¥åˆ°Side Service';
                } else {
                    console.warn('ZeppBridgeä¸å¯ç”¨');
                    document.getElementById('status').textContent = 'ç¦»çº¿æ¨¡å¼';
                }
            } catch (e) {
                console.error('åˆ›å»ºZeppBridgeå¤±è´¥:', e);
                document.getElementById('status').textContent = 'è¿æ¥å¤±è´¥';
            }
            
            // å¯åŠ¨å¿ƒè·³
            setInterval(heartbeat, 3000);
            console.log('å¿ƒè·³å·²å¯åŠ¨');
        });
        
        console.log('è„šæœ¬æ‰§è¡Œå®Œæˆ');
    </script>
</body>
</html>
